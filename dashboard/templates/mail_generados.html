{% extends "base.html" %}

{% block titulo %}Emails Generados{% endblock %}
{% block subtitulo %}Historial de todos los emails verificados.{% endblock %}

{% block contenido %}
<div class="glass card">
  <h3>üìä Historial de Emails Verificados</h3>

  <!-- ESTAD√çSTICAS -->
  <div class="cards-row">
    <div class="info-card info-card--blue">
      <div class="info-card__label">Total Generados</div>
      <div class="info-card__value">{{ total }}</div>
    </div>
    <div class="info-card info-card--green">
      <div class="info-card__label">Existen en Google</div>
      <div class="info-card__value">{{ existe_count }}</div>
    </div>
    <div class="info-card info-card--yellow">
      <div class="info-card__label">No Existen</div>
      <div class="info-card__value">{{ no_existe_count }}</div>
    </div>
  </div>

  <!-- TABLA -->
  {% if emails %}
  <table class="table--compact">
    <thead>
      <tr>
        <th>Email</th>
        <th>Nombre</th>
        <th>Apellido</th>
        <th>Existe</th>
        <th>Verificado en</th>
      </tr>
    </thead>
    <tbody>
      {% for e in emails %}
      <tr>
        <td><code>{{ e.email }}</code></td>
        <td>{{ e.nombre or '-' }}</td>
        <td>{{ e.apellido or '-' }}</td>
        <td>
          {% if e.existe_en_google == True %}
            <span style="color: #22c55e; font-weight: bold;">‚úÖ S√≠</span>
          {% elif e.existe_en_google == False %}
            <span style="color: #ef4444; font-weight: bold;">‚ùå No</span>
          {% else %}
            <span style="color: #9ca3af;">‚è≥ Pendiente</span>
          {% endif %}
        </td>
        <td>
          {% if e.verificado_en %}
            {{ e.verificado_en[:10] }}
          {% else %}
            -
          {% endif %}
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>

  {% else %}
  <div style="text-align: center; padding: 40px; background: rgba(34, 197, 94, 0.1); border-radius: 12px;">
    <p style="color: var(--text-muted); margin: 0;">
      üì≠ No hay emails generados a√∫n. <a href="{{ url_for('mail_generator') }}" style="color: var(--accent); font-weight: 600; text-decoration: none;">Genera uno ahora</a>
    </p>
  </div>
  {% endif %}
</div>

<!-- Botones de navegaci√≥n -->
<div style="margin-top: 20px; display: flex; gap: 10px;">
  <a href="{{ url_for('mail_generator') }}" class="btn-link">‚Üê Volver al Generador</a>
  <a href="{{ url_for('general') }}" class="btn-link">‚Üê Volver al Dashboard</a>
</div>

{% endblock %}
